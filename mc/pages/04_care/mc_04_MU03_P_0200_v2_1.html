<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>레이아웃 샘플</title>
    <link rel="stylesheet" href="../../css/library.css">
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/contents.css">
    <link rel="stylesheet" href="../../css/templateB.css">
    <link rel="stylesheet" href="../../css/templateC.css">
    <link rel="stylesheet" href="../../css/templateD.css">
    <script src="../../js/jquery-3.5.1.min.js"></script><!-- 퍼블확인용 제이쿼리 js 추가 -->
    <script src="../../js/swiper-bundle.min.js"></script>
    <script src="../../js/layout.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@latest/lib/typed.min.js"></script> <!-- 20240304 타이핑효과 스크립트 추가 -->
</head>
<body>
    <header>
        <div class="sub-hedaer">
            <button type="button" class="btn-back">뒤로가기</button>
            <h1 class="page-title">스타일챗</h1>
            <button type="button" class="btn-search">검색</button>
            <button type="button" class="btn-cart">장바구니<span class="num">11</span></button>
        </div>
    </header>
    <section>

        <!-- 20240216 #4871 [MO] 케어 스타일챗 > 신규 페이지 추가  -->
        <div id="" class=" pop_style_chat full" >
            <div class="cont">
    
                <!-- 채팅영역 -->
                <div class="style_chat_area">
                    <div class="chat_wrap_inner">
    
                        <div class="date">오늘</div><!-- 날짜 표시 활성화 영역 -->
    
                        <!-- 20240524 #4871 [MO] 케어 스타일챗 > 컬러칩 영역 추가 -->
                        <div class="chat_box right">
                            <p class="bubble">좋아하는 컬러만 모아보고 싶어요.</p>
                            <span class="time">오전 09:30</span>
                        </div>
    
                        <!-- 컬러칩 항목 선택 영역 -->
                        <div class="color_chip_area">
                            <ul>
                                <li><a href="javascript:void(0)"><span class="chip black">블랙</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip beige">베이지</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip pink">핑크</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip green">그린</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip gold">골드</span></a></li>
                            </ul>
                        </div>
                        <!-- //컬러칩 항목 선택 영역 -->
    
                        <div class="chat_box right select_color_chip"><!-- class="chat_box right"에 select_color_chip 추가 -->
                            <p class="bubble"><span class="chip black">블랙</span></p>
                            <span class="time">오전 09:30</span>
                        </div>
    
                        <div class="chat_box left">
                            <p class="bubble"><span class="chip black">컬러만 모아봤어요.</span></p>
                            <span class="time">오전 09:30</span>
                        </div>
    
                        <!-- 비슷한 상품 추천 영역 -->
                        <div class="recom_prod_area">
                            <div class="unitList swiper expand-slider typeA" id="">
                                <ul class="swiper-wrapper">
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G307639732/G307639732_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G352052621/G352052621_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G308367742/G308367742_11.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G268344437/G268344437_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- //비슷한 상품 추천 영역 -->
    
                        <div class="chat_box right">
                            <p class="bubble button">더 보여주세요.</p><!-- 버튼 사용시 class="button" 추가 -->
                        </div>
    
                        <div class="chat_box right">
                            <p class="bubble button">좋아하는 컬러만 모아보고 싶어요.</p><!-- 버튼 사용시 class="button" 추가 -->
                        </div>
    
                        <div class="chat_box right">
                            <p class="bubble button">다른 컬러로 추천해주세요.</p><!-- 버튼 사용시 class="button" 추가 -->
                        </div>
    
                        <!-- 컬러칩 항목 선택 영역 -->
                        <div class="color_chip_area">
                            <ul>
                                <li><a href="javascript:void(0)"><span class="chip black">블랙</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip white">화이트</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip beige">베이지</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip brown">브라운</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip red">레드</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip pink">핑크</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip gray">그레이</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip green">그린</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip blue">블루</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip navy">네이비</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip yellow">옐로우</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip purple">퍼플</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip orange">오렌지</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip khaki">카키</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip mint">민트</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip lavender">라벤더</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip wine">와인</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip sky">스카이</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip gold">골드</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip rosegold">로즈골드</span></a></li>
                                <li><a href="javascript:void(0)"><span class="chip silver">실버</span></a></li>
                            </ul>
                        </div>
                        <!-- //컬러칩 항목 선택 영역 -->
                        <!-- //20240524 #4871 [MO] 케어 스타일챗 > 컬러칩 영역 추가 -->
    
                        <!-- 첫인사 안내시 노출 -->
                        <div class="chat_box left">
                            <p id="typeChat" class="bubble"></p><!-- 타이핑 효과 추가 -->
                            <span class="time">오전 09:30</span>
                        </div>
                        <!-- //첫인사 안내시 노출 -->
    
                        <!-- 채팅 로드 시 노출 --> 
                        <div class="chat_box left">
                            <p class="bubble"><span class="load_dotted"></span></p><!-- 채팅 로드 시 노출 --> 
                        </div>
                        <!-- //채팅 로드 시 노출 --> 
    
                        <div class="chat_box left">
                            <p class="bubble">최근에 보신 <strong class="product">핑크 스트랩 원피스</strong>아이템과 비교해볼만한 아이템을 골라봤어요.</p>
                            <span class="time">오전 09:30</span>
                        </div>
                        
                        <!-- 비슷한 상품 추천 영역 -->
                        <div class="recom_prod_area">
                            <p class="guide recom_prod">버튼을 누르시면 비슷한 상품을 추천드려요.</p>
                            <div class="unitList swiper expand-slider typeA" id="">
                                <ul class="swiper-wrapper">
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G307639732/G307639732_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G352052621/G352052621_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G308367742/G308367742_11.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G268344437/G268344437_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- //비슷한 상품 추천 영역 -->
    
                        <div class="chat_box right">
                            <p class="bubble">하늘하늘 원피스 찾아주세요.</p>
                            <span class="time">오전 09:30</span>
                        </div>
    
                        <div class="chat_box left">
                            <p class="bubble">이런 <strong class="keyword">하늘하늘 원피스</strong>는 어떠세요?</p>
                            <span class="time">오전 09:30</span>
                        </div>
                        <!-- 비슷한 상품 추천 영역 -->
                        <div class="recom_prod_area">
                            <p class="guide recom_prod">버튼을 누르시면 비슷한 상품을 추천드려요.</p>
                            <div class="unitList swiper expand-slider typeA" id="">
                                <ul class="swiper-wrapper">
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G307639732/G307639732_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G352052621/G352052621_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G308367742/G308367742_11.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                    <li class="swiper-slide">
                                        <a href="#">
                                            <div class="thumb ratio-a">
                                                <img src="https://image.babathe.com/goods/G268344437/G268344437_1.jpg/babathe/resize/360x528/optimize" alt="">
                                            </div>
                                            <div class="unit_info_area">
                                                <em class="title">IZZAT BABA</em>
                                                <div class="priceWrap">
                                                    <span class="price">1,296,743</span>
                                                </div>
                                            </div>
                                        </a>
                                        <button class="search-related-prd">비슷한 상품 찾기</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- //비슷한 상품 추천 영역 -->
    
                        <div class="chat_box right want_prod"><!-- class="chat_box right"에 want_prod 추가 -->
                            <p class="bubble"><span class="want_prd_img"><img src="https://image.babathe.com/goods/G307639732/G307639732_1.jpg/babathe/resize/360x528/optimize" alt=""></span>상품으로 좀 더<br>추천해주세요.</p>
                            <span class="time">오전 09:30</span>
                        </div>

                        <!-- 텍스트 언더라인 class="underline" 추가 -->
                        <div class="chat_box left">
                            <p class="bubble">이런 <strong class="keyword underline">하늘하늘 원피스</strong>는 어떠세요?</p>
                            <span class="time">오전 09:30</span>
                        </div>
                        <!-- //텍스트 언더라인 추가 -->
    
                    </div>
                </div>
                <!-- //채팅영역 -->
                <!-- 입력영역 -->
                <div class="inp_wrap">
                    <div class="inp_wrap_inner">
                        <textarea name="" id="" placeholder="예) 하늘하늘한 블라우스" rows="4"></textarea>
                        <button type="button" class="btn_search_chat"><span>찾아주세요</span></button>
                    </div>
                    <a class="go-recent-msg" href="javascript:void(0)">최신 내용으로 가기</a>
                </div>
            </div>
        </div>
        <!-- //20240307 #4871 [MO] 케어 스타일챗 > 신규 페이지 추가  -->
        
    </section>

    <div class="bottomFloating care">
        <button type="button" class="btn menu">메뉴</button>
        <button type="button" class="btn chat beta">스타일챗</button>
        <button type="button" class="btn home">홈</button>
        <button type="button" class="btn mybaba">마이</button>
        <button type="button" class="btn history">히스토리</button>
    </div>
    
<script>
$(function(){

    //상품 추천 리스트 스와이퍼
    var unitListSwiper_typeA = new Swiper('.unitList.typeA', {
        slidesPerView: 3.2,
        spaceBetween: 4,
        observer: true,
		observeParents: true,
    });

	//타이핑효과 스크립트
	function typeChat() {
		var typed =new Typed('#typeChat', {
			strings: ['<span>김바바</span>님, 반가워요.<br>찾고 싶은 스타일이 있으신가요?<br>저에게 알려주시면 취향 맞춤 아이템을 찾아드릴게요!'],
			typeSpeed: 50,
			backSpeed: 0,
			backDelay: 0,
			startDelay: 0,
			showCursor: false,
			loop: false
		});
	};
    typeChat();

    //스타일챗 팝업 노출 시 html 스크롤 잠금/해제
    function htmlScrollHidden(){
        if($(".layerPop.pop_style_chat").hasClass("open")){
            $("html").css("overflow","hidden");
        }else{
            $("html").css("overflow","");
        }
    };
    //스타일챗 팝업 노출 시 html 스크롤 잠금/해제
    htmlScrollHidden();
    $(".btn-styleChat").click(function(e){
        e.preventDefault();
        htmlScrollHidden();
    });
    $(".layerPop.pop_style_chat .btn-close").click(function(e){
        e.preventDefault();
        htmlScrollHidden();
    });

    // 스크롤이 감지되었을 때 실행되는 함수
    function checkScrollBottom(){
        var scrollHeight = $('.style_chat_area')[0].scrollHeight; // 스크롤 영역의 전체 높이
        var scrollPosition = $('.style_chat_area').scrollTop(); // 현재 스크롤 위치
        var windowHeight = $('.style_chat_area').outerHeight(); // 스크롤 영역의 보이는 창 높이
        
        // 스크롤이 맨 아래로 이동했을 때
        if (scrollHeight - scrollPosition <= windowHeight + 1) {
        //if (scrollHeight - scrollPosition <= windowHeight) {
            //console.log('맨 하단에 도달했습니다.');
            $(".go-recent-msg").removeClass("on");// 채팅창 맨하단으로 바로가기 버튼 비활성화
        }else{
            $(".go-recent-msg").addClass("on");// 채팅창 맨하단으로 바로가기 버튼 활성화
        }
    };
    checkScrollBottom();
    // 스크롤이 발생할 때 checkScrollBottom 함수를 실행
    //$('.style_chat_area').scroll(function(){
    $('.style_chat_area').on('scroll touchmove', function(){
        //e.preventDefault();
        checkScrollBottom();
    });

    //채팅창 스크롤 맨하단 최신 메세지영역으로 가기
    $(".go-recent-msg").click(function(e){
        e.preventDefault();
        $(this).removeClass("on");
        //checkScrollBottom();
        $('.style_chat_area').scrollTop($('.style_chat_area')[0].scrollHeight);
    });

    //textarea영역 텍스트 입력 시 높이 사이즈 조절 스크립트
    $(".inp_wrap textarea").each(function(){
        //this.setAttribute("style", "height:" + (this.scrollHeight) + "px;overflow-y:hidden;");
        this.setAttribute("style", "height:" + (this.scrollHeight) + "px;");
        
    }).on("input", function(){
        this.style.height = 0;
        this.style.height = (this.scrollHeight) + "px";

        var lines = $(this).val().split('\n').length;
        if (lines > 4) return;
        
        var chatPaddBottom = $(".style_chat_area").css("padding-bottom");
        
        $('.style_chat_area').css({"padding-bottom": this.scrollHeight + 8});
        $('.style_chat_area').scrollTop($('.style_chat_area')[0].scrollHeight);

        //키입력 시 검색 버튼 활성화
        var inputText = $(this).val().trim(); // 입력된 텍스트를 가져옴 (공백 제거)
        if(inputText !== '') {
            $(this).addClass("on")
        }else{
            $(this).removeClass("on")
        }
        
    });

});

</script>
</body>
</html>